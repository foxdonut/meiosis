<!DOCTYPE html>
<html>
<head>
<title>Meiosis Documentation</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="normalize.css">
<link rel="stylesheet" href="skeleton.css">
<link rel="stylesheet" href="prism.css">
<link rel="stylesheet" href="style.css">
</head>
<body class="container">
<script src="prism.js" type="text/javascript"></script>
<script src="flems.html" type="text/javascript" charset="utf-8"></script>
<h1><a href="https://meiosis.js.org/setup">meiosis-setup</a> Documentation</h1><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><a href="setup-nested-components.html">&rarrhk; Nested Components</a></td>
<td><a href="setup-view-library.html">&larrhk; View Library</a></td>
<td><a href="setup-toc.html">&#8673; Table of Contents</a></td>
</tr>
</tbody></table>
<h2>Services</h2><p>To set up Meiosis with Services (explained in the Meiosis Documentation:
<a href="http://meiosis.js.org/docs/08-services.html">reference</a>), use the <code>services</code> property of <code>app</code>:</p>
<pre><code class="language-js">const app = {
  services: [...]
};

const cells = meiosisSetup({ app });
</code></pre>
<p>Each service is an object with a <code>run</code> function and, optionally, an <code>onchange</code> function.
<code>meiosis-setup</code> automatically wires up services, calling <code>onchange</code> (if defined) and calling <code>run</code>
only when the value returned by <code>onchange</code> changes:</p>
<pre><code class="language-js">const service = {
  onchange: (state) =&gt; state.x,
  // run is called only when x changes, thus avoiding infinite loops
  run: (cell) =&gt; {
    cell.update({ y: x * 10 });
  }
};
</code></pre>
<p>If a service does not have an <code>onchange</code> function, its <code>run</code> function will be called for every state
change. Thus it must make sure to avoid an infinite loop:</p>
<pre><code class="language-js">const service = {
  run: (cell) =&gt; {
    if (cell.state.data === undefined) {
      loadData().then(data =&gt; {
        cell.update({ data });
      })
    }
  }
}
</code></pre>
<p>Services can also be nested using nested components, which we will look at next.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><a href="setup-nested-components.html">&rarrhk; Nested Components</a></td>
<td><a href="setup-view-library.html">&larrhk; View Library</a></td>
<td><a href="setup-toc.html">&#8673; Table of Contents</a></td>
</tr>
</tbody></table>
<p><a href="https://meiosis.js.org">Meiosis</a> is developed by foxdonut (<a href="http://twitter.com/foxdonut00">Twitter</a> /
<a href="https://github.com/foxdonut">GitHub</a>) and is released under the MIT license.</p>

</body>
</html>