<!DOCTYPE html>
<html>
<head>
<title>Meiosis Documentation</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="normalize.css">
<link rel="stylesheet" href="skeleton.css">
<link rel="stylesheet" href="prism.css">
<link rel="stylesheet" href="docs.css">
</head>
<body class="container">
<script src="prism.js" type="text/javascript"></script>
<script src="flems.html" type="text/javascript" charset="utf-8"></script>
<div class="lesson">
<h1><a href="https://meiosis.js.org/setup">meiosis-setup</a> Documentation</h1><div class="docs-nav">
  <a href="setup-ts-installation.html"><span class="nav-prev">
        <span class="arrow">&#x2B05;</span>
        <span class="title">Installation</span>
      </span></a>
  <a class="toc" href="setup-ts-toc.html">&#x2B06; Contents</a>
  <a href="setup-ts-initial-state.html"><span class="nav-next">
        <span class="arrow">&#x27A1;</span>
        <span class="title">Initial State</span>
      </span></a>
</div>

<h2>Patches</h2><p>In the Meiosis Documentation, the Meiosis pattern is setup up either with
<a href="https://meiosis.js.org/docs/04-meiosis-with-function-patches.html">Function Patches</a> or
<a href="https://meiosis.js.org/docs/05-meiosis-with-mergerino.html">Mergerino</a>. The idea is that using
Function Patches gives you the option of having one less library dependency.</p>
<p>On the other hand, <code>meiosis-setup</code> takes a &quot;ready-to-use&quot; approach and includes Mergerino as a
dependency. Since Mergerino handles Function Patches, there is no need to choose between the two
when setting up Meiosis with <code>meiosis-setup</code>. You can use Function Patches and/or Mergerino as you
please:</p>
<pre><code class="language-js">import { meiosisSetup } from &#39;meiosis-setup&#39;;

interface State {
  // your application state type
}

const cells = meiosisSetup&lt;State&gt;();
cells().update(...); // Function Patch or Mergerino works
</code></pre>
<h3>State Type</h3><p>Since we are using TypeScript, we&#39;ll want to define a type for our application state to get the most
out of what TypeScript offers.</p>
<p>Let&#39;s say we have a <code>State</code> type as shown below:</p>
<pre><code class="language-ts">interface State {
  name: string;
  age: number;
}
</code></pre>
<p>Then, after setting up Meiosis:</p>
<pre><code class="language-ts">import { meiosisSetup } from &#39;meiosis-setup&#39;;

const cells = meiosisSetup&lt;State&gt;();

const cell = cells();
</code></pre>
<p>We now have a stream of cells with each cell having <code>state</code> of type <code>State</code> and having <code>update</code>
taking patches that must be compatible with <code>State</code>.</p>
<p>As mentioned earlier, both Function Patches and Mergerino work to update the state.</p>
<p>In the example below, you can experiment with TypeScript support. Try the following:</p>
<ul>
<li>On the line with <code>cell</code>, add a dot (.) after <code>cell</code> and see the auto-suggested <code>cell</code> properties.</li>
<li>On the line with <code>cell.state</code>, add a dot (.) after <code>state</code> and see the auto-suggested properties,
<code>name</code> and <code>age</code>.</li>
<li>Uncomment the line <code>cell.update({ invalid: true });</code> and see the patch in error since <code>&#39;invalid&#39;</code>
is not a property of <code>State</code>.</li>
<li>Uncomment the line <code>cell.update({ age: &#39;not valid&#39;});</code> and see the patch in error since
<code>&#39;not valid&#39;</code> is not a <code>number</code>.</li>
</ul>
<iframe src="https://stackblitz.com/github/foxdonut/meiosis/tree/master/helpers/setup/examples/snippets?embed=1&terminalHeight=0&ctl=1&view=editor&file=src/patches.ts" style="width:100%;height:500px"></iframe>

<div class="docs-nav">
  <a href="setup-ts-installation.html"><span class="nav-prev">
        <span class="arrow">&#x2B05;</span>
        <span class="title">Installation</span>
      </span></a>
  <a class="toc" href="setup-ts-toc.html">&#x2B06; Contents</a>
  <a href="setup-ts-initial-state.html"><span class="nav-next">
        <span class="arrow">&#x27A1;</span>
        <span class="title">Initial State</span>
      </span></a>
</div>

<hr>
<div>
<a href="https://meiosis.js.org">Meiosis</a> is developed by foxdonut
(<a href="https://twitter.com/foxdonut00">Twitter</a> /
<a href="https://github.com/foxdonut">GitHub</a>) and is released under the MIT license.
</div>
</div>
</body>
</html>